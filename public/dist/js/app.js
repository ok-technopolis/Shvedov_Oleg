"use strict";!function(t){function e(i){if(o[i])return o[i].exports;var n=o[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var o={};e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,i){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=7)}([function(t,e){function o(){}function i(t,e,o){var i=t._eventable_registry;return e in i?i[e]:o?i[e]=[]:null}o.prototype._initEventable=function(){this._eventable_registry={}},o.prototype.on=function(t,e,o){return i(this,t,!0).push({handler:e,ctx:o}),this},o.prototype.off=function(t,e,o){var n=i(this,t);if(n)for(var r=n.length;r--;)if(n[r].handler===e&&n[r].ctx===o)return n.splice(r,1),this;return this},o.prototype.trigger=function(t,e){var o=i(this,t);if(o)for(var n=o.slice(),r=0,s=n.length;r!==s;r+=1)n[r].handler.call(n[r].ctx,e);return this},t.exports=o},function(t,e){function o(t,e){for(var o in e.prototype)t.prototype[o]=e.prototype[o];return t}t.exports=o},function(t,e,o){function i(t){this._initEventable(),this._root=t,this._input=t.querySelector(".js-todo-add_input"),this._selectAllBtn=t.querySelector(".js-todo-add_select-all"),this._input.addEventListener("keypress",this),this._selectAllBtn.addEventListener("click",this)}o(1)(i,o(0)),i.prototype._onSelectAll=function(){return this.trigger("selectAll")},i.prototype._onTodoAdd=function(){var t=this._input.value.trim();if(0!==t.length)return this._input.value="",this._input.blur(),this.trigger("todoCreate",{text:t})},i.prototype.getRoot=function(){return this._root},i.prototype.handleEvent=function(t){switch(t.type){case"click":this._onSelectAll();break;case"keypress":13===t.keyCode&&this._onTodoAdd()}},t.exports=i},function(t,e){function o(t){this._root=t,this._todosMain=t.querySelector(".js-todos-main")}o.prototype.updateInterfaceVisibility=function(t){return t?this._todosMain.classList.remove("__empty"):this._todosMain.classList.add("__empty"),this},o.prototype.getRoot=function(){return this._root},t.exports=o},function(t,e,o){function i(t){this._initEventable(),this._root=t,this._counter=t.querySelector(".js-left-counter"),this._clearCompletedBtn=t.querySelector(".js-todos-actions-bar_clear-completed"),this._filters=new s(t.querySelector(".js-todos-actions-bar_filters")),this._filters.on("filterSelect",this._onFilterSelected,this),this._clearCompletedBtn.addEventListener("click",this)}var n=o(1),r=o(0),s=o(8);n(i,r),i.prototype._onFilterSelected=function(t){return this.trigger("filterSelected",t)},i.prototype._onClearCompleted=function(){return this.trigger("clearCompleted")},i.prototype.setLeftTodosCount=function(t){return this._counter.innerHTML=t+"&nbsp;"+(1===t?"item":"items")+"&nbsp;left",this},i.prototype.manageClearCompletedVisibility=function(t){return t?this._clearCompletedBtn.classList.remove("__hide"):this._clearCompletedBtn.classList.add("__hide"),this},i.prototype.handleEvent=function(t){switch(t.type){case"click":this._onClearCompleted()}},t.exports=i},function(t,e,o){function i(t){this._initEventable(),this._root=t,this._items=[],this._left=0,this._filter="all"}var n=o(1),r=o(0),s=o(9);n(i,r),i.prototype.getTodosCount=function(){return this._items.length},i.prototype.getLeftTodosCount=function(){return this._left},i.prototype.createTodo=function(t){var e=new s(Object.assign({},t));return e.model.get("isReady")||(this._left+=1),this._items.push(e),e.on("todoChange",this._onTodoChange,this).on("todoRemove",this._onTodoRemove,this).render(this._root),this.trigger("todoAdded",e),this},i.prototype.clearCompleted=function(){for(var t=this._items.length;t--;)this._items[t].model.get("isReady")&&this._items[t].remove();return this},i.prototype._getItemById=function(t){for(var e=this._items.length;e--;)if(this._items[e].model.get("id")===t)return this._items[e];return null},i.prototype._onTodoChange=function(t){t.isReady?this._left-=1:this._left+=1,this.filterShowedItems(this._filter),this.trigger("todoChange",this)},i.prototype._onTodoRemove=function(t){var e=this._getItemById(t);if(e){e.model.get("isReady")||(this._left-=1),e.off("todoChange",this._onItemChange,this).off("todoRemove",this._onItemRemove,this);var o=this._items.indexOf(e);this._items.splice(o,1),this.trigger("todoRemove",e.model)}return this},i.prototype.selectAll=function(){return this._items.forEach(function(t){t.changeReady(!0)}),this},i.prototype.setFilter=function(t){return t?(this._filter=t,this.filterShowedItems(t)):this.filterShowedItems(this._filter)},i.prototype.filterShowedItems=function(t){return this._items.forEach(function(e){switch(t){case"all":e.visible(!0);break;case"completed":e.visible(e.model.get("isReady"));break;case"active":e.visible(!e.model.get("isReady"))}}),this},i.prototype.getRoot=function(){return this._root},t.exports=i},function(t,e,o){function i(t){this._initEventable(),this._itemIds=0,this._items=t,this.on("todoChange",this.onChange).on("todoRemove",this.onChange).on("todoAdded",this.onChange)}var n=o(1),r=o(0),s=o(10);n(i,r),i.prototype.getList=function(){return this._items},i.prototype.onChange=function(t,e){return t.call(this,e),this},i.prototype.add=function(t){var e=new s(Object.assign({id:this._itemIds++},t));return this._items.push(e),this.trigger("changeList",this._items),this.trigger("todoAdd",e),this},i.prototype.remove=function(t){},i.prototype.clearCompleted=function(){},t.exports=i},function(t,e,o){function i(){function t(){var t=d.getTodosCount(),e=d.getLeftTodosCount();0!==t?l.updateMarkers(!0):l.updateMarkers(!1),u.setLeftTodosCount(e)}function e(){d.getTodosCount()-d.getLeftTodosCount()>0?u.manageClearCompletedVisibility(!0):u.manageClearCompletedVisibility(!1)}var o=new n([]),i=document.querySelector(".main-wrapper"),l=new r(i),c=new s(i.querySelector(".todo-add")),d=new a(i.querySelector(".js-todos-list")),u=new h(i.querySelector(".todos-actions-bar"));o.onChange(function(){0!==o.getList().length?l.updateMarkers(!0):l.updateMarkers(!1);var t=d.getLeftTodosCount();u.setLeftTodosCount(t),o.getList().length-t>0?u.manageClearCompletedVisibility(!0):u.manageClearCompletedVisibility(!1)}),c.on("todoCreate",function(t){o.add(t)}).on("selectAll",function(){o.getList().forEach(function(t){t.set("isReady",!0)})}),o.on("todoAdd",function(t){d.createTodo(t)}).on("remove",function(t){d.remove(t)}),d.on("todoAdded",function(){t(),d.setFilter()}).on("todoRemove",function(){e(),t()}).on("todoChange",function(){e(),t()}),u.on("clearCompleted",function(){o.clearCompleted()}).on("filterSelected",function(t){d.setFilter(t)})}document.addEventListener("DOMContentLoaded",i);var n=o(6),r=o(3),s=o(2),a=o(5),h=o(4)},function(t,e,o){function i(t){this._initEventable(),this._filters=t.querySelectorAll(".filter"),this._activeFilter=null;for(var e=0;e<this._filters.length;e++)this._filters[e].addEventListener("click",this),this._filters[e].classList.contains("__active")&&(this._activeFilter=this._filters[e])}o(1)(i,o(0)),i.prototype._onSetFilter=function(t){return this._activeFilter!==t&&(this._activeFilter.classList.remove("__active"),t.classList.add("__active"),this._activeFilter=t,this.trigger("filterSelect",t.dataset.filter)),this},i.prototype.handleEvent=function(t){switch(t.type){case"click":this._onSetFilter(t.target)}},t.exports=i},function(t,e,o){function i(t){this._initEventable();var e=a.todoItem({text:t.get("text")});this._root=e.root,this._readyMark=e.readyMark,this._remove=e.remove,this._text=e.text,this.model=t,t.get("isReady")&&(this._manageReadyModificator(!0),this.trigger("todoChange",this.model)),this._readyMark.addEventListener("change",this),this._remove.addEventListener("click",this),this._text.addEventListener("blur",this)}var n=o(1),s=o(0),a=o(11);n(i,s),i.prototype.render=function(t){return t.appendChild(this._root),this},i.prototype._onSetText=function(t){return this.model.get(text)!==t&&(this._text.innerText=t,this.model.set("text",t)),this},i.prototype._manageReadyModificator=function(t){return t?this._root.classList.add("__ready"):this._root.classList.remove("__ready"),this},i.prototype.changeReady=function(t){return t!==this.model.get(t)&&(this._readyMark.checked=t,this.model.set("isReady",t),this._manageReadyModificator(t),this.trigger("todoChange",this.model),r),this},i.prototype.remove=function(){return this._root.parentNode.removeChild(this._root),this.trigger("todoRemove",this.model.get(id))},i.prototype.visible=function(t){t?this._root.classList.remove("__hide"):this._root.classList.add("__hide")},i.prototype.handleEvent=function(t){switch(t.type){case"change":this.changeReady(this._readyMark.checked);break;case"click":t.target===this._remove&&this.remove();break;case"blur":this._onSetText(this._text.innerText)}},t.exports=i},function(t,e,o){function i(t){this._initEventable(),this._model={id:t.id,isReady:t.isReady||!1,text:t.text}}o(1)(i,o(0)),i.prototype.set=function(t,e){return this._model[t]=e,this},i.prototype.get=function(t){return this._model[t]},i.prototype.onAnyChange=function(t,e){},i.prototype.onChange=function(t,e,o){},t.exports=i},function(t,e){function o(t){var e=document.getElementById(t);i.innerHTML=e.innerHTML;var o=i.children[0];return i.removeChild(o),o}var i=document.createElement("div"),n={todoItem:function(t){var e=o("todoItemTemplate"),i=e.querySelector(".js-todo-item_ready-mark"),n=e.querySelector(".js-todo-item_remove"),r=e.querySelector(".js-todo-item_text");return t.text&&(r.innerText=t.text),t.isReady&&(i.checked=!0),{root:e,text:r,readyMark:i,remove:n}}};t.exports=n}]);